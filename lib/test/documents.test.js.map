{"version":3,"sources":["../../src/test/documents.test.js"],"names":["describe","context","before","web3","contract","ipfsClient","it","documentData","to","eql","id","organizationId","encrypted","magic","body","data","hola","ipfsDirectoryHash","pinned","created","Date","organizationDetails","organization","documentIds","name","attachmentInformation","attachments","depth","hash","path","size","type","skip","attachedFiles"],"mappings":"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","sourcesContent":["import { expect } from 'chai';\n\nimport './web3.test';\nimport './contract.test';\nimport './ipfs.test';\nimport createWeb3Instace from '../web3';\nimport createContractInstance from '../contract';\nimport createIpfsClient from '../ipfs';\nimport { getDocument } from '../documents';\n\ndescribe('Describe document module', () => {\n  const context = {};\n  before(() => {\n    context.web3 = createWeb3Instace();\n    context.contract = createContractInstance(context.web3);\n    context.ipfsClient = createIpfsClient();\n  });\n\n  it('gets unencrypted document with no options', async () => {\n    const documentData = await getDocument(\n      context.contract,\n      context.ipfsClient,\n      'a8719f44df881b7c'\n    );\n    expect(documentData).to.eql({\n      id: 'a8719f44df881b7c',\n      organizationId: '1fd5f224b87d03f4',\n      encrypted: false,\n      magic: '00000000000000000000000000000000',\n      body: '# Title',\n      data: { hola: 'jota' },\n      ipfsDirectoryHash: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU',\n      pinned: true,\n      created: new Date(1575841952000),\n    });\n  });\n\n  it('gets unencrypted document with organization details', async () => {\n    const documentData = await getDocument(\n      context.contract,\n      context.ipfsClient,\n      'a8719f44df881b7c',\n      {\n        organizationDetails: true,\n      }\n    );\n    expect(documentData).to.eql({\n      id: 'a8719f44df881b7c',\n      organizationId: '1fd5f224b87d03f4',\n      organization: {\n        created: new Date('2019-12-08T20:53:24.000Z'),\n        documentIds: [\n          '1eff3b7333183499',\n          '7f16f3668b9efa6f',\n          'a4e95e3b90d4fcec',\n          'fef18a53e7282b83',\n          'c92a0af21d8c85c4',\n          '221fb2db2b30e17b',\n          'c6bd5503e8a17cf0',\n          '221fb2db2b30e17b',\n          'a3fc220059d90999',\n          'a8719f44df881b7c',\n          '34206c975e2e09e7',\n        ],\n        id: '1fd5f224b87d03f4',\n        name: 'Docsit Client Test Organization',\n      },\n      encrypted: false,\n      magic: '00000000000000000000000000000000',\n      body: '# Title',\n      data: { hola: 'jota' },\n      ipfsDirectoryHash: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU',\n      pinned: true,\n      created: new Date(1575841952000),\n    });\n  });\n\n  it('gets unencrypted document with attachment information', async () => {\n    const documentData = await getDocument(\n      context.contract,\n      context.ipfsClient,\n      'a8719f44df881b7c',\n      {\n        attachmentInformation: true,\n      }\n    );\n    expect(documentData).to.eql({\n      id: 'a8719f44df881b7c',\n      organizationId: '1fd5f224b87d03f4',\n      encrypted: false,\n      magic: '00000000000000000000000000000000',\n      body: '# Title',\n      data: { hola: 'jota' },\n      attachments: [\n        {\n          depth: 1,\n          hash: 'QmVYL9ceTmuZWiDJipHVktvEjx35PpUeNpQViWyfkUT2My',\n          name: 'default-skin.css',\n          path: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU/default-skin.css',\n          size: 11607,\n          type: 'file',\n        },\n        {\n          depth: 1,\n\n          hash: 'QmekKeMRq7mwvBspZwEfTiTeVnxPRQ3WqQzcnA7MAZ3Fux',\n          name: 'default-skin.min.css',\n          path: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU/default-skin.min.css',\n          size: 7897,\n          type: 'file',\n        },\n        {\n          depth: 1,\n          hash: 'QmTpcLZFRhXSZ4c3M4bBWWUrmRKGXv3gfF3JwZVnhx7eZm',\n          name: 'default-skin.png',\n          path: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU/default-skin.png',\n          size: 547,\n          type: 'file',\n        },\n        {\n          depth: 1,\n          hash: 'Qmd6jmGpkirFedm5B4X7H77oguwKitAZtNtyJR2ygZcu1E',\n          name: 'default-skin.svg',\n          path: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU/default-skin.svg',\n          size: 1554,\n          type: 'file',\n        },\n        {\n          depth: 1,\n          hash: 'QmT2sYCQp7u56Xee3oDW7Wv7ZDD1aEF6NQVqWyViJpuV3u',\n          name: 'preloader.gif',\n          path: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU/preloader.gif',\n          size: 866,\n          type: 'file',\n        },\n      ],\n      ipfsDirectoryHash: 'QmT4n2a261NS1ekg6zfxhYGuojCQCkpQGhP8LPSeJkQcXU',\n      pinned: true,\n      created: new Date(1575841952000),\n    });\n  });\n\n  it.skip('gets unencrypted document with attachmented files', async () => {\n    const documentData = await getDocument(\n      context.contract,\n      context.ipfsClient,\n      'd47b0bc94ddde188',\n      {\n        attachedFiles: true,\n      }\n    );\n    expect(documentData).to.eql({\n      id: 'd47b0bc94ddde188',\n      organizationId: '584b071315f47728',\n      encrypted: true, // TODO: THIS SHOULD BE FALSE\n      magic: '00000000000000000000000000000000',\n      body: '# Title',\n      data: {},\n      ipfsDirectoryHash: 'QmSnuWmxptJZdLJpKRarxBMS2Ju2oANVrgbr2xWbie9b2D',\n      pinned: true,\n      created: new Date(1575838837000),\n    });\n  });\n\n  it.skip('gets encrypted document with no options', async () => {});\n\n  it.skip('gets encrypted document with organization details', async () => {});\n\n  it.skip('gets encrypted document with attachmen information', async () => {});\n\n  it.skip('gets encrypted document with attachmented files', async () => {});\n});\n"],"file":"documents.test.js"}