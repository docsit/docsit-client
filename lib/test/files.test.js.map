{"version":3,"sources":["../../src/test/files.test.js"],"names":["describe","context","before","ipfsClient","it","file","content","toString","to","equal","response","path","Buffer","from","eql","directory","hash","size","files","name","type","depth"],"mappings":"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","sourcesContent":["import { expect } from 'chai';\n\nimport './ipfs.test';\nimport createIpfsClient from '../ipfs';\nimport { saveFilesInDirectory, getFile, listFilesInDirectory } from '../files';\n\ndescribe('Describe files module', () => {\n  const context = {};\n  before(() => {\n    context.ipfsClient = createIpfsClient();\n  });\n  it('should correctly get a file', async () => {\n    const [file] = await getFile(\n      context.ipfsClient,\n      'QmZtmD2qt6fJot32nabSP3CUjicnypEBz7bHVDhPQt9aAy'\n    );\n    expect(file.content.toString('utf8')).to.equal('version 1 of my text\\n');\n  });\n  it('should correctly save array of files and wrap them in directory', async () => {\n    const response = await saveFilesInDirectory(context.ipfsClient, [\n      { path: 'file-1', content: Buffer.from('hello 1') },\n      { path: 'file-2', content: Buffer.from('hello 2') },\n      { path: 'file-3', content: Buffer.from('hello 3') },\n    ]);\n    expect(response).to.eql({\n      directory: {\n        path: '',\n        hash: 'QmSTaWhi6xW2L1mUprRvtw22UXFCPyzZx5d1cmwMBa1bu4',\n        size: 193,\n      },\n      files: [\n        {\n          path: 'file-1',\n          hash: 'QmYU2WZfhRAhz7z5xekJkAZWznK2k27uyiH7KZct6VdCbe',\n          size: 15,\n        },\n        {\n          path: 'file-2',\n          hash: 'QmYNmWVijaKZAbse8vJDrUiBk6CrksRUHepy2e14DaL4fW',\n          size: 15,\n        },\n        {\n          path: 'file-3',\n          hash: 'QmT6Y6kJSpMs8hG9tD685sFtLegkddXxydL9tzZuyV6Dc3',\n          size: 15,\n        },\n      ],\n    });\n  });\n  it('should correctly list files in directory', async () => {\n    const response = await listFilesInDirectory(\n      context.ipfsClient,\n      'QmSTaWhi6xW2L1mUprRvtw22UXFCPyzZx5d1cmwMBa1bu4'\n    );\n    expect(response).to.eql([\n      {\n        name: 'file-1',\n        path: 'QmSTaWhi6xW2L1mUprRvtw22UXFCPyzZx5d1cmwMBa1bu4/file-1',\n        size: 7,\n        hash: 'QmYU2WZfhRAhz7z5xekJkAZWznK2k27uyiH7KZct6VdCbe',\n        type: 'file',\n        depth: 1,\n      },\n      {\n        name: 'file-2',\n        path: 'QmSTaWhi6xW2L1mUprRvtw22UXFCPyzZx5d1cmwMBa1bu4/file-2',\n        size: 7,\n        hash: 'QmYNmWVijaKZAbse8vJDrUiBk6CrksRUHepy2e14DaL4fW',\n        type: 'file',\n        depth: 1,\n      },\n      {\n        name: 'file-3',\n        path: 'QmSTaWhi6xW2L1mUprRvtw22UXFCPyzZx5d1cmwMBa1bu4/file-3',\n        size: 7,\n        hash: 'QmT6Y6kJSpMs8hG9tD685sFtLegkddXxydL9tzZuyV6Dc3',\n        type: 'file',\n        depth: 1,\n      },\n    ]);\n  });\n});\n"],"file":"files.test.js"}